{"version":3,"sources":["./src/app/tab3/tab3.page.html","./src/app/tab3/tab3-routing.module.ts","./src/app/tab3/tab3.module.ts","./src/app/tab3/tab3.page.scss","./src/app/tab3/tab3.page.ts"],"names":[],"mappings":"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","file":"tab3-tab3-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar class=\\\"new-background-color\\\">\\n\\n    <ion-title class=\\\"title\\\"><b>Leaderboard</b></ion-title>\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<!-- <ion-spinner class=\\\"loadingSpinner\\\" *ngIf=\\\"showLoading\\\"></ion-spinner> -->\\n\\n\\n\\n<ion-content style=\\\"font-family: 'Roboto';\\\">\\n\\n\\n\\n  <div *ngIf=\\\"showLoading || generateTokenLoading\\\">\\n    <div class=\\\"page-loader\\\">\\n      <img src=\\\"assets/images/loader.gif\\\">\\n    </div>\\n  </div>\\n\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n\\n  <div class=\\\"pagePadding\\\" *ngIf=\\\"leaderboard\\\">\\n    <p class=\\\"lableTag\\\">\\n      <b>Your Position</b>\\n\\n    </p>\\n    <ion-row class=\\\"UserRow\\\">\\n\\n      <ion-col size=\\\"2\\\" class=\\\"rankCol\\\">\\n        <p> <b>{{rank}}</b></p>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\">\\n        <!--  <p > <img  src=\\\"assets/images/plant.png\\\"  class=\\\"imgProf\\\"></p> -->\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <p class=\\\"boldTxt\\\"><b>{{empName}}</b></p>\\n        <p class=\\\"medFont\\\">{{location}}</p>\\n      </ion-col>\\n      <ion-col size=\\\"3\\\">\\n        <p class=\\\"vioTxt\\\">{{totalKMs | number : '1.0-2'}} Km</p>\\n        <p>\\n          <img src=\\\"assets/images/relaxing-walk.png\\\" *ngIf=\\\"isWalking\\\" class=\\\"activityImg\\\">\\n          <img src=\\\"assets/images/running-person.png\\\" *ngIf=\\\"isJogging\\\" class=\\\"runningImg\\\">\\n        </p>\\n      </ion-col>\\n    </ion-row>\\n    <p class=\\\"lableTag\\\">\\n      <b>Top Performers</b>\\n    </p>\\n\\n    <ion-row class=\\\"headerRow\\\">\\n\\n      <ion-col size=\\\"2\\\">Rank</ion-col>\\n      <ion-col size=\\\"1\\\">\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        Name</ion-col>\\n      <ion-col size=\\\"3\\\">\\n        Distance</ion-col>\\n    </ion-row>\\n    <ion-row class=\\\"listRow\\\" *ngFor=\\\"let item of leaderboard;let i=index\\\">\\n      <ion-col size=\\\"2\\\" class=\\\"rankCol\\\">\\n        <p><b>{{item.Rank}}</b></p>\\n      </ion-col>\\n      <ion-col size=\\\"1\\\">\\n        <!--   <p > <img  src=\\\"assets/images/plant.png\\\" class=\\\"imgProf\\\"></p> -->\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <p class=\\\"boldTxt\\\"><b>{{item.EmpName}}</b></p>\\n        <p class=\\\"medFont\\\">{{item.EmpLocation}}</p>\\n      </ion-col>\\n      <ion-col size=\\\"3\\\">\\n        <p class=\\\"vioTxt\\\">{{item.TotalKMs | number : '1.0-2'}} Km</p>\\n        <p class=\\\"iconRow\\\">\\n          <img src=\\\"assets/images/relaxing-walk.png\\\" *ngIf=\\\"item.Walking\\\" class=\\\"activityImg\\\">\\n\\n          <img src=\\\"assets/images/running-person.png\\\" *ngIf=\\\"item.Jogging\\\" class=\\\"runningImg\\\">\\n\\n        </p>\\n      </ion-col>\\n    </ion-row>\\n\\n\\n\\n  </div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab3Page } from './tab3.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\nimport { IonicStorageModule } from '@ionic/storage';\n\nimport { Tab3PageRoutingModule } from './tab3-routing.module'\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\n    Tab3PageRoutingModule,\n    IonicStorageModule.forRoot({\n      name: '__1StepMiles-localstorage',\n      driverOrder: ['sqlite', 'indexeddb', 'websql', 'localstorage']\n    })\n  ],\n  declarations: [Tab3Page]\n})\nexport class Tab3PageModule { }\n","export default \".pagePadding {\\n  padding: 5px;\\n}\\n\\n.lableTag {\\n  margin: 10px;\\n  padding: 5px;\\n  font-size: 19px;\\n  font-weight: 600;\\n  color: #1A1A1A;\\n}\\n\\n.headerRow {\\n  font-size: 14px;\\n  margin: 10px;\\n  padding: 10px;\\n  border-radius: 4px;\\n  background: rgba(232, 232, 232, 0.31) 0% 0% no-repeat padding-box;\\n  color: black;\\n  font-weight: 600;\\n}\\n\\n.listRow {\\n  color: #414141;\\n  margin: 10px;\\n  margin-top: 8px;\\n  border-radius: 4px;\\n  box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);\\n}\\n\\n.activityImg {\\n  border: 1.2px solid #6D63D9;\\n  border-radius: 50%;\\n  -moz-border-radius: 50%;\\n  -webkit-border-radius: 50%;\\n  padding: 2px 6px;\\n  width: 22px;\\n  height: 22px;\\n}\\n\\n.runningImg {\\n  margin-right: 3%;\\n  margin-left: 8%;\\n  border: 1.2px solid #6D63D9;\\n  border-radius: 50%;\\n  -moz-border-radius: 50%;\\n  -webkit-border-radius: 50%;\\n  padding: 2px 3px;\\n  width: 22px;\\n  height: 22px;\\n}\\n\\n.UserRow {\\n  font-size: 14px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  border: 1px solid #6d63d9;\\n  color: #414141;\\n}\\n\\nion-col {\\n  padding-top: 0px;\\n  padding-bottom: 0px;\\n}\\n\\n.rankCol {\\n  margin: auto;\\n  text-align: center;\\n  font-weight: 600;\\n  font-size: 16px;\\n}\\n\\n.vioTxt {\\n  color: #6d63d9;\\n  font-weight: 600;\\n  font-size: 15px;\\n}\\n\\n.boldTxt {\\n  font-weight: 500;\\n  font-size: 14px;\\n  color: #1A1A1A;\\n}\\n\\n.medFont {\\n  font-size: 12px;\\n}\\n\\n.title {\\n  color: #00008C;\\n  text-align: center;\\n  font-size: 20px;\\n}\\n\\n.imgProf {\\n  padding-top: 40%;\\n}\\n\\n.iconRow {\\n  margin-top: -9%;\\n}\\n\\n.loadingSpinner {\\n  color: #00008C;\\n  width: 50px;\\n  height: 50px;\\n  stroke: #444;\\n  fill: #222;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMy90YWIzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUdBO0VBQ0ksZUFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxpRUFBQTtFQUNBLFlBQUE7RUFFQSxnQkFBQTtBQURKOztBQUtBO0VBQ0ksY0FBQTtFQUVBLFlBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFFQSwrR0FBQTtBQUpKOztBQU9BO0VBR0ksMkJBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0EsMEJBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FBTko7O0FBU0E7RUFFSSxnQkFBQTtFQUNBLGVBQUE7RUFDQSwyQkFBQTtFQUNBLGtCQUFBO0VBQ0EsdUJBQUE7RUFDQSwwQkFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUFQSjs7QUFVQTtFQUNJLGVBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtFQUNBLGNBQUE7QUFQSjs7QUFVQTtFQUNJLGdCQUFBO0VBQ0EsbUJBQUE7QUFQSjs7QUFVQTtFQUNJLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtBQVBKOztBQVdBO0VBQ0ksY0FBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtBQVJKOztBQVdBO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQVJKOztBQVdBO0VBQ0ksZUFBQTtBQVJKOztBQVdBO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQVJKOztBQVdBO0VBQ0ksZ0JBQUE7QUFSSjs7QUFXQTtFQUNJLGVBQUE7QUFSSjs7QUFXQTtFQUVJLGNBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0FBVEoiLCJmaWxlIjoic3JjL2FwcC90YWIzL3RhYjMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZ2VQYWRkaW5nIHtcclxuICAgIHBhZGRpbmc6IDVweDtcclxufVxyXG5cclxuLmxhYmxlVGFnIHtcclxuICAgIG1hcmdpbjogMTBweDtcclxuICAgIHBhZGRpbmc6IDVweDtcclxuICAgIGZvbnQtc2l6ZTogMTlweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBjb2xvcjogIzFBMUExQTtcclxuICAgIC8vIGZvbnQtZmFtaWx5OiBSb2JvdG8sIE1lZGl1bTtcclxufVxyXG5cclxuLmhlYWRlclJvdyB7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIzMiwgMjMyLCAyMzIsIDAuMzEpIDAlIDAlIG5vLXJlcGVhdCBwYWRkaW5nLWJveDtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIC8vIG9wYWNpdHk6IDAuMzE7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG5cclxufVxyXG5cclxuLmxpc3RSb3cge1xyXG4gICAgY29sb3I6ICM0MTQxNDE7XHJcbiAgICAvLyBmb250LXNpemU6IDE0cHg7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiA4cHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAvLyBoZWlnaHQ6IDc0cHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDNweCAxcHggLTJweCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgMnB4IDJweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDVweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7XHJcbn1cclxuXHJcbi5hY3Rpdml0eUltZyB7XHJcblxyXG4gICAgLy8gbWFyZ2luLXRvcDogLTE4JTtcclxuICAgIGJvcmRlcjogMS4ycHggc29saWQgIzZENjNEOTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIC1tb3otYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBwYWRkaW5nOiAycHggNnB4O1xyXG4gICAgd2lkdGg6IDIycHg7XHJcbiAgICBoZWlnaHQ6IDIycHg7XHJcbn1cclxuXHJcbi5ydW5uaW5nSW1nIHtcclxuXHJcbiAgICBtYXJnaW4tcmlnaHQ6IDMlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDglO1xyXG4gICAgYm9yZGVyOiAxLjJweCBzb2xpZCAjNkQ2M0Q5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgLW1vei1ib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIHBhZGRpbmc6IDJweCAzcHg7XHJcbiAgICB3aWR0aDogMjJweDtcclxuICAgIGhlaWdodDogMjJweDtcclxufVxyXG5cclxuLlVzZXJSb3cge1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgbWFyZ2luOiAxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzZkNjNkOTtcclxuICAgIGNvbG9yOiAjNDE0MTQxO1xyXG59XHJcblxyXG5pb24tY29sIHtcclxuICAgIHBhZGRpbmctdG9wOiAwcHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMHB4O1xyXG59XHJcblxyXG4ucmFua0NvbCB7XHJcbiAgICBtYXJnaW46IGF1dG87XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG5cclxufVxyXG5cclxuLnZpb1R4dCB7XHJcbiAgICBjb2xvcjogIzZkNjNkOTtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbn1cclxuXHJcbi5ib2xkVHh0IHtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBjb2xvcjogIzFBMUExQTtcclxufVxyXG5cclxuLm1lZEZvbnQge1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4udGl0bGUge1xyXG4gICAgY29sb3I6ICMwMDAwOEM7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IDIwcHhcclxufVxyXG5cclxuLmltZ1Byb2Yge1xyXG4gICAgcGFkZGluZy10b3A6IDQwJTtcclxufVxyXG5cclxuLmljb25Sb3cge1xyXG4gICAgbWFyZ2luLXRvcDogLTklO1xyXG59XHJcblxyXG4ubG9hZGluZ1NwaW5uZXIge1xyXG4gICAgLy8gYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgICBjb2xvcjogIzAwMDA4QztcclxuICAgIHdpZHRoOiA1MHB4O1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgc3Ryb2tlOiAjNDQ0O1xyXG4gICAgZmlsbDogIzIyMjtcclxuXHJcbn1cclxuIl19 */\";","import { Component, OnInit } from '@angular/core';\nimport { PopoverController } from '@ionic/angular';\nimport { CommonService } from '../services/common.service';\nimport { RetryPopupComponent } from '../tab1/retry-popup/retry-popup.component';\nimport { Storage } from '@ionic/storage';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: 'tab3.page.html',\n  styleUrls: ['tab3.page.scss']\n})\nexport class Tab3Page implements OnInit {\n\n  constructor(private service: CommonService, private popover: PopoverController,\n    private storage: Storage) { }\n\n  leaderboard: any = null;\n  empName: string = '';\n  location: string = '';\n  totalKMs: string = '0';\n  rank: string = '---';\n  isJogging: boolean = true;\n  isWalking: boolean = false;\n  showLoading: boolean = true;\n  generateTokenLoading = false\n\n  refresher: any;\n\n  ngOnInit() {\n    this.pageInit()\n  }\n\n  // Automatic refresh leaderboard\n  ionViewWillEnter(){\n    this.pageInit()\n  }\n\n  async pageInit() {\n    // this.showLoading = !this.refresher  //showLoading set to true\n    let empObj: any = this.service.getEmpObject() || {}\n    this.empName = empObj.name\n    if (empObj.location && environment.apiUrl.includes('wfcprod')) {\n      this.location = this.service.decryptMessage(empObj.location)\n    } else {\n      this.location = empObj.location\n    }\n\n    // let leaderboardObj = await this.service.get('leaderboard')\n\n    // this.updateUI(leaderboardObj)\n    const that = this;\n\n    if (localStorage.getItem('access_token')) {\n      this.service.getLeaderboardRanks(empObj.psNo).subscribe((response) => {\n        this.showLoading = false\n        // this.service.dismissLoading()\n        //console.log(\"response: \",response)\n        if (response && response.length > 0) {\n          response.forEach(function (value) {\n            if (value.EmpLocation && environment.apiUrl.includes('wfcprod')) {\n              value.EmpLocation = that.service.decryptMessage(value.EmpLocation)\n            }\n          })\n        }\n        this.updateUI(response)\n        this.hideRefresher();\n      }, (error) => {\n        this.showLoading = false\n        this.hideRefresher();\n        this.service.dismissLoading()\n\n        if (error.status === 401) {\n          // localStorage.removeItem('access_token')\n          this.getNewToken();\n        }\n        console.log(\"error--+\" + JSON.stringify(error));\n      });\n    }\n    else {\n      this.getNewToken()\n    }\n\n  }\n\n  hideRefresher() {\n    if (this.refresher && this.refresher.target) {\n      this.refresher.target.complete();\n      this.refresher = '';\n    }\n  }\n\n  doRefresh(event) {\n    this.refresher = event;\n    this.pageInit()\n\n  }\n\n  async updateUI(data) {\n    //console.log(\"update UI: \",data)\n    this.service.set('leaderboard', data)\n    this.totalKMs = parseFloat(data[0].TotalKMs).toFixed(2)\n    this.service.totalKm = this.totalKMs\n    this.service.set('totalKm', this.totalKMs)\n    this.rank = data[0].Rank\n    let userActivity = data[0].ActivityType.split(',')\n    //console.log(\"userActivity:\",userActivity)\n    \n    //console.log(\"this data\")\n    console.log(data[0])\n\n    userActivity.indexOf('Jogging') >= 0 ? this.isJogging = true : this.isJogging = false\n    userActivity.indexOf('Walking') >= 0 ? this.isWalking = true : this.isWalking = false\n\n    this.leaderboard = data.slice(1)  //removed the currnt employee info from top to display leaderboard ahead\n    //console.log(this.leaderboard)\n    //this.leaderboard=data \n\n    for (let item in this.leaderboard) {\n      let activities = this.leaderboard[item].ActivityType.split(',')\n      activities.indexOf('Jogging') >= 0 ? this.leaderboard[item].Jogging = true : this.leaderboard[item].Jogging = false\n      activities.indexOf('Walking') >= 0 ? this.leaderboard[item].Walking = true : this.leaderboard[item].Walking = false\n    }\n\n    this.leaderboard.sort((a, b) => {\n      return a.Rank - b.Rank;\n    })\n    //console.log(this.leaderboard)\n  }\n\n  async getNewToken() {\n    this.generateTokenLoading = true;\n    this.service.showLoading();\n    this.service.generateToken().subscribe((response) => {\n      this.service.dismissLoading()\n      console.log(\"getNewToken\",response)\n      localStorage.setItem(\"token_expires_on\", response.expires_on)\n      localStorage.setItem(\"access_token\", response.access_token)\n      localStorage.setItem(\"token_expires_in\", response.expires_in)\n      this.generateTokenLoading = false;\n      this.pageInit();\n\n    }, (error) => {\n      this.generateTokenLoading = false;\n      this.service.dismissLoading()\n      console.log(JSON.stringify(error))\n    },\n    );\n\n  }\n}\n"],"sourceRoot":"webpack:///"}